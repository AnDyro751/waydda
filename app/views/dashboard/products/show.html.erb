<%= content_for(:head_tags) do %>
  <meta name="content_slug" content="<%= @product.id.to_s %>"/>
  <meta name="content_model" content="product"/>
<% end %>
<div class="w-full py-8 flex gap-4 items-center justify-between">
  <%= render Headers::Text.new(title: "#{@product.name}", subtitle: @product.description, small: true) do %>
    <%= main_button(text: "Actualizar producto", to: edit_dashboard_product_path(@product.slug), action: "update") %>
  <% end %>
</div>
<div class="w-full mt-8">
  <h3 class="text-lg mb-4 font-normal">
    Imagen del producto
  </h3>
  <div class="w-full">
    <div class="mt-4 flex flex-wrap">
      <div class="flex w-full">
        <label
          class="h-48 rounded relative w-48 bg-gray-200 cursor-pointer"
        >
          <div class="absolute flex justify-center items-center rounded bottom-0 top-0 left-0 right-0 bg-black bg-opacity-25 opacity-0 hover:opacity-100 hover:bg-opacity-75 transition duration-150">
            <span class="text-sm text-white">Actualizar</span>
          </div>
          <img
            id="product_image"
            class="lazy h-48 rounded w-48 bg-gray-200"
            src="<%= get_image_url(10, 10, @product.photo, "cover") %>" data-src="<%= get_image_url(200, 200, @product.photo, "cover") %>" alt="<%= @product.name %> photo">
          <input type='file' class="hidden" id="my-file-input" accept="image/*"/>
        </label>
      </div>
      <div class="UppyInput-Progress w-full mt-8"></div>
    </div>
  </div>
</div>
<div class="w-full flex mt-8 flex-wrap">
  <div class="w-full flex justify-between items-center">
    <div class="w-8/12">
      <h3 class="text-lg mb-1 font-normal">
        Variantes
      </h3>
    </div>
    <div class="w-4/12 flex justify-end">
      <%= main_button(text: "Agregar variante", to: new_dashboard_product_aggregate_path(@product.slug), action: "add") %>
    </div>
  </div>
  <div class="w-full mt-4">
    <%= render Dashboard::Aggregates::List.new(aggregates: @product.aggregates, size: "base") %>
  </div>
</div>
<%#= link_to "Ver aggregates", dashboard_product_aggregates_path(@product.slug) %>
<div class="w-full my-12">
  <h3 class="text-2xl mb-1 font-normal">
    Área de peligro
  </h3>
  <h5 class="text-gray-600 text-sm mb-4 w-6/12">Si eliminas el producto no podrás recuperar la información de este
    recurso, está acción es <strong>irreversible</strong></h5>
  <%= button_to "Eliminar producto", dashboard_product_path(@product.slug), method: :delete, data: {confirm: "¿Estás seguro?"}, class: "bg-red-600 text-white px-8 py-2 cursor-pointer outline-none rounded" %>
</div>
<%= javascript_packs_with_chunks_tag "dashboard/products/new", 'data-turbolinks-track': "reload" %>
