<div class="w-full mt-4 text-gray-600 text-sm">
  <div class=""><%= link_to "Productos", dashboard_products_path, class: "hover:underline" %>
    <div class="mx-2 select-none inline">
      >
    </div>
    <span class="hover:underline">
      <%= link_to @product.name, dashboard_product_path(@product.slug) %>
    </span>
    <span class="mx-2">
      >
    </span>
    <span class="hover:underline">
      <%= link_to "Variantes", dashboard_product_aggregates_path(@product.slug) %>
    </span>
    <span class="mx-2">
      >
    </span>
    <span class="text-indigo-700 font-medium">Nueva variante</span>
  </div>
</div>
<div class="w-full">
  <%= render Headers::Text.new(title: "Agregar variante", subtitle: "Nueva variante para #{@product.name}", small: true) %>
</div>
<!--, input_html: {class: 'py-3 px-3 bg-white border-gray-400 border appearance-none focus:border-black rounded focus:outline-none w-full mt-2 mb-4'}}-->
<%= simple_form_for(@aggregate, url: dashboard_product_aggregates_path, remote: true, html: {class: "w-full mb-12"}, defaults: {error_html: {class: "text-red-600 mb-2 font-bold text-sm"}}) do |f| %>
  <div class="w-full flex gap-8 items-start">
    <div class="w-4/12 flex flex-wrap">
      <div class="w-full border-b pb-4">
        <h4 class="mb-1 font-normal">
          <%= link_to @product.name, dashboard_product_path(@product.slug) %>
        </h4>
        <h5 class="text-gray-600 text-sm"><%= pluralize(@product.aggregates.select { |agg| !agg.new_record }.length, 'variante', plural: 'variantes') %></h5>
      </div>
      <div class="w-full border-b mt-4 pb-2">
        <h4 class="mb-1 font-normal">
          Variantes (<%= @product.aggregates.select { |agg| !agg.new_record? }.length %>)
        </h4>
        <%= render Dashboard::Aggregates::List.new(aggregates: @product.aggregates.select { |agg| !agg.new_record }, size: "small", product: @product) %>
      </div>
    </div>
    <div class="w-8/12">
      <%= f.input :name, required: true, placeholder: "Nombre de la variante", label: "Nombre", label_html: {class: "text-sm font-normal text-gray-600"}, input_html: {class: 'py-3 px-3 bg-white border-gray-400 border appearance-none focus:border-black rounded focus:outline-none w-full mt-2 mb-4'} %>
      <div class="form-error" id="name-error"></div>
      <%= f.input :price, as: :float, placeholder: "Precio de la variante", label: "Precio", label_html: {class: "text-sm font-normal text-gray-600"}, input_html: {class: 'py-3 px-3 bg-white border-gray-400 border appearance-none focus:border-black rounded focus:outline-none w-full mt-2 mb-4'} %>
      <div class="form-error" id="price-error"></div>
      <%= f.input :add_to_price_product, as: :boolean, label: "Sumar al precio del producto", label_html: {class: "text-sm font-normal text-gray-600"} %>
      <div class="form-error" id="add_to_price_product-error"></div>
      <!--      TODO: Sumar al precio del produco - toggle para mostrar m치s informaci칩n-->
      <%= f.input :description, placeholder: "Descripci칩n de la variante", label: "Descripci칩n", label_html: {class: "text-sm font-normal text-gray-600"}, input_html: {class: 'py-3 px-3 bg-white border-gray-400 border appearance-none focus:border-black rounded focus:outline-none w-full mt-2 mb-4'} %>
      <div class="form-error" id="description-error"></div>
      <%#= f.input :default, as: :boolean, label: "Marcar como predeterminada", label_html: {class: "text-sm font-normal text-gray-600"} %>
      <div class="form-error" id="default-error"></div>
      <div class="w-full flex justify-end">
        <%= f.submit value: "Crear variante",
                     class: main_color_button(color: "secondary"),
                     data: {"disable-with": "Creando..."}
        %>
      </div>
    </div>
  </div>
<% end %>
